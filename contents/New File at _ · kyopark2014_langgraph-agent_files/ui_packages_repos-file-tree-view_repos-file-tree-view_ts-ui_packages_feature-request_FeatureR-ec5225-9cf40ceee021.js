"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_feature-request_FeatureR-ec5225"],{39672:(e,t,r)=>{r.d(t,{Z:()=>a});function a({appendQuery:e,retainScrollPosition:t,returnTarget:r}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:r}}))}},73480:(e,t,r)=>{function a(e){return n(e)[0]}function n(e){let t=[];for(let r of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,n]=r.trim().split("=");e===a&&void 0!==n&&t.push({key:a,value:n})}return t}function i(e,t,r=null,a=!1,n="lax"){let i=document.domain;if(null==i)throw Error("Unable to get document domain");i.endsWith(".github.com")&&(i="github.com");let l="https:"===location.protocol?"; secure":"",o=r?`; expires=${r}`:"";!1===a&&(i=`.${i}`);try{document.cookie=`${e}=${t}; path=/; domain=${i}${o}${l}; samesite=${n}`}catch{}}function l(e,t=!1){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let a=new Date(new Date().getTime()-1).toUTCString(),n="https:"===location.protocol?"; secure":"",i=`; expires=${a}`;!1===t&&(r=`.${r}`);try{document.cookie=`${e}=''; path=/; domain=${r}${i}${n}`}catch{}}r.d(t,{OR:()=>n,Ri:()=>a,TV:()=>i,Yj:()=>l})},30814:(e,t,r)=>{r.d(t,{Nq:()=>W,H:()=>p,c2:()=>ei,Uy:()=>M,qn:()=>eh});var a=r(74848),n=r(28910),i=r(95619),l=r(62353),o=r(95140),s=r(59857),c=r(55847),d=r(96540);let u=d.forwardRef(({expanded:e,onToggleExpanded:t,className:r,ariaControls:d,textAreaId:u,useFilesButtonBreakpoint:m=!0,variant:p,getTooltipDirection:h},f)=>{let{toggleTreeShortcut:x}=(0,l.wk)(),[g]=(0,o.I)(()=>!1,!0,[]),y=h?.(e)??"se";return(0,a.jsxs)(a.Fragment,{children:[m&&(!e||g)&&(0,a.jsx)(c.Q,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":x.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:f,onClick:t,variant:p??"invisible",sx:{color:"fg.muted",px:2,display:"none","@media screen and (max-width: 768px)":{display:"block"}},children:"Files"}),(0,a.jsx)(i.L,{dataHotkey:x.hotkey,className:r,expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:y,testid:"file-tree-button",ariaControls:d,ref:f,variant:p,onToggleExpanded:t,sx:{height:"32px",position:"relative",...m?{"@media screen and (max-width: 768px)":{display:!e||g?"none":"flex"}}:{display:"flex"}}}),(0,a.jsx)(n._,{buttonFocusId:u,buttonHotkey:x.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});u.displayName="ExpandFileTreeButton";var m=r(61836);function p({inputRef:e,onFindFilesShortcut:t,textAreaId:r}){let{sendRepoKeyDownEvent:i}=(0,m.T)(),{findFilesShortcut:o}=(0,l.wk)();return(0,a.jsx)(n._,{buttonFocusId:r,buttonHotkey:o.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),i("GO_TO_FILE")}})}try{p.displayName||(p.displayName="FindFilesShortcut")}catch{}var h=r(28610),f=r(42573),x=r(43772),g=r(20864),y=r(18704),w=r(51848),b=r(83056),v=r(56226),R=r(42024),C=r(18212),j=r(28784),k=r(56265),N=r(75177),F=r(94977),I=r(87330),E=r(30729),S=r(93653),T=r(42141),A=r(27104);let _=(0,d.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{_.displayName||(_.displayName="FileTreeContext")}catch{}var O=r(57294),$=r(68976),D=r(27500),q=r(27788),L=r(72512),P=r(38553);let G=(0,d.createContext)({});function W({children:e}){let t=(0,d.useRef)(!1),r=(0,d.useRef)(!1),n=(0,d.useRef)(!0),i=(0,d.useCallback)(e=>{t.current=e},[]),l=(0,d.useCallback)(e=>{r.current=e},[]),o=(0,d.useCallback)(e=>{n.current=e},[]),s=(0,d.useMemo)(()=>({expandAllFolders:t,refreshTree:r,shouldFetchFolders:n,setExpandAllFolders:i,setRefreshTree:l,setShouldFetchFolders:o}),[i,l,o]);return(0,a.jsx)(G.Provider,{value:s,children:e})}function M(){return(0,d.useContext)(G)}try{G.displayName||(G.displayName="FileTreeControlContext")}catch{}try{W.displayName||(W.displayName="FileTreeControlProvider")}catch{}var V=r(65556);function H(e,t,r){let a=[];for(let n of t)if(n.startsWith(e)){let t=n.slice(e.length+1),i=t.indexOf("/"),l=i>0?t.slice(0,i):t,o=`${e}/${l}`;if(r&&r.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===n?"file":"directory",name:l,path:o,isClientOnly:!0}};a.push(s)}return a}function B(e,t,r){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let a=t.name.slice(0,t.name.lastIndexOf("/")),n=a.indexOf("/")>-1,i={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:a,hasSimplifiedPath:n},l={items:[e],data:i};return(r.set(i.path,l),n)?B(l,{...i},r):l}function z(e,t,r,a){if(!e)return{newRootItems:r,rootItemsUpdated:!1};let n=!!e[""]&&U("",t,r,e[""].items);for(let n of(a?.(r),Object.keys(e).sort()))if(n){let r=t.get(n);r&&(U(n,t,r.items,e[n].items,a),r.data.totalCount=e[n].totalCount)}return{newRootItems:r,rootItemsUpdated:n}}function U(e,t,r,a,n){let i=!1;for(let l of a){let a=e?`${e}/${l.name}`:l.name;if(!t.get(a)){let e={items:[],data:{...l}};if(t.set(a,e),l.hasSimplifiedPath){let a=B(e,l,t),o=r.findIndex(e=>e.data.path===a.data.path);-1!==o?a.items.length>r[o].items.length&&(r[o]=a,i=!0):(r.push(a),n?.(r))}else r.push(e),n?.(r)}}return i}function K({isActive:e,file:t,onItemSelected:r,getItemUrl:n,selectedItemRef:i,navigate:l,onRenderRow:o,getFileTrailingVisual:c,getFileIcon:u}){let{sendRepoClickEvent:p}=(0,m.T)(),h=d.useRef(null),f=(0,D.Z)({focusRowRef:h,mouseRowRef:h}),x="submodule"===t.data.contentType,g=c?.(t.data),y=d.useCallback(a=>{x?(a.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):a.metaKey||a.ctrlKey||1===a.button?(window.open(n(t.data),"_blank"),a.preventDefault()):e?a.preventDefault():(r?.(),p("FILES_TREE.ITEM",{item_path:t.data.path}),l(n(t.data)),a.stopPropagation())},[t.data,n,e,x,l,r,p]);return o?.(),(0,a.jsxs)(L.G.Item,{ref:h,onSelect:y,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,a.jsx)(L.G.LeadingVisual,{children:u?u(t.data):x?(0,a.jsx)(s.FileSubmoduleIcon,{}):(0,a.jsx)(s.FileIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{ref:i,style:{color:x?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),f&&(0,a.jsx)($.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:h,"aria-label":t.data.name,open:!0,direction:"ne"})]}),!!g?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,a.jsx)(L.G.TrailingVisual,{children:g.trailingVisual})]})}let Z=d.memo(K);function X({clientOnlyFilePaths:e,directory:t,isActive:r,isAncestorOfActive:n,leadingPath:i="",onItemSelected:l,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:c,selectedItemRef:u,navigate:p,onRenderRow:h,getFileTrailingVisual:f,getFileIcon:x,navigateOnClick:g=!0}){let{expandAllFolders:y,shouldFetchFolders:w}=M(),[b,v]=(0,d.useState)(y?.current||n),{sendRepoClickEvent:R}=(0,m.T)(),C=d.useRef(null),k=d.useRef(null),N=(0,D.Z)({focusRowRef:k,mouseRowRef:C}),[F,I,E,S,T,A,_]=function(e,t,r){let[a,n]=d.useState(e.items),[i,l]=d.useState(e.data.totalCount||0),[o,s]=d.useState(!1),[c,u]=d.useState(!1),{safeSetTimeout:m}=(0,V.A)();d.useEffect(()=>{n(e.items)},[e.items]),d.useEffect(()=>{void 0!==e.data.totalCount&&l(e.data.totalCount)},[e.data.totalCount]);let p=d.useCallback(()=>{u(!1)},[]),h=d.useCallback((e,t)=>{let r=e||[...a];n(r.slice(0,100)),m(()=>{n(r),void 0!==t&&l(t)},1)},[a,m]);return[d.useCallback(async a=>{let i=new Map;if(e.data.isClientOnly){if(a){let r=H(e.data.path,a);for(let e of r)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),r.length>100?h(r,r.length):(n(r),l(r.length))}}else{let o=r(e.data);u(!1),s(!0);let c=Date.now(),d=await (0,j.lS)(`${o}?noancestors=1`);try{if(d.ok){let r=await d.json(),o=r.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===r.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?B(t,e,i):t});if(a){let t=e.data.path,n=H(t,a,r.payload.tree.items);for(let e of(o.push(...n),n))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=r.payload.tree.totalCount,o.length>100?h(o,r.payload.tree.totalCount):(n(o),l(r.payload.tree.totalCount))}else u(!0)}catch{u(!0)}}s(!1)},[r,e,t,h]),h,a,o,c,p,i]}(t,o,c),O=_-E.length,q=i?`${i}/`:"";(0,d.useEffect)(()=>{y?.current&&!b&&v(!0)},[t,y,b]);let P=d.useCallback(a=>{y?.current&&(y.current=!1),!a||b||S||T||(t.items.length>100?I():0!==t.items.length||r||n||w?.current===!1||F(e)),a!==b&&v(a)},[y,b,S,T,t.items.length,r,n,w,I,F,e]),G=d.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&g?(window.open(s(t.data),"_blank"),e.preventDefault()):r?e.preventDefault():(l?.(),R("FILES_TREE.ITEM",{item_path:t.data.path}),g?p(s(t.data)):P?.(!b),e.stopPropagation())},[t.data,s,r,b,p,g,l,P,R]);d.useEffect(()=>{n&&!b&&P?.(!0)},[n]),d.useEffect(()=>{0===t.items.length&&b?P?.(!1):!b&&t.autoExpand&&P?.(!0)},[t.items.length]);let W=d.useCallback(e=>{u&&r&&u(e),C.current=e},[u,r]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,a.jsx)(Q,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:q+t.data.name,inheritsActive:r,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:u,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:f,getFileIcon:x}):(h?.(),(0,a.jsxs)(L.G.Item,{ref:k,expanded:b,onExpandedChange:P,current:r,onSelect:G,id:`${t.data.path}-item`,containIntrinsicSize:r?void 0:"auto 2rem",children:[(0,a.jsx)(L.G.LeadingVisual,{children:(0,a.jsx)(L.G.DirectoryIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{ref:W,children:[q,t.data.name]}),N&&(0,a.jsx)($.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:k,"aria-label":`${q}${t.data.name}`,open:!0,direction:"ne"})]}),(0,a.jsx)(L.G.SubTree,{state:S?"loading":T?"error":"done",children:T?(0,a.jsx)(L.G.ErrorDialog,{onRetry:F,onDismiss:A,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{clientOnlyFilePaths:e,directoryItems:E,dispatchKnownFolders:o,onItemSelected:l,selectedItemRef:u,getItemUrl:s,directoryNavigateOnClick:g,getFileTrailingVisual:f,getFileIcon:x}),O>0&&(0,a.jsx)(et,{message:`${O} entries not shown`})]})})]}))}let Y=d.memo(X);function J({clientOnlyFilePaths:e,directoryItems:t,leadingPath:r,inheritsActive:n,onItemSelected:i,dispatchKnownFolders:l,selectedItemRef:o,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:p=!0}){let{path:h}=(0,O.eu)(),f=(0,y.Z)(),x=(0,q.Z)(),g=d.useRef(x);return(0,a.jsx)(a.Fragment,{children:t.map(t=>{let d=h===t.data.path,x=d||h.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,a.jsx)(Y,{clientOnlyFilePaths:e,isActive:n||d,isAncestorOfActive:x,onItemSelected:i,leadingPath:r,directory:t,dispatchKnownFolders:l,getItemUrl:c,getFetchUrl:f.getItemUrl,selectedItemRef:x?o:void 0,navigate:g.current,onRenderRow:s,navigateOnClick:p,getFileTrailingVisual:u,getFileIcon:m},t.data.name):(0,a.jsx)(Z,{onItemSelected:i,file:t,isActive:d,getItemUrl:c,selectedItemRef:d?o:void 0,navigate:g.current,onRenderRow:s,getFileTrailingVisual:u,getFileIcon:m},t.data.name)})})}let Q=d.memo(J);function ee(e){let{clientOnlyFilePaths:t,data:r,rootItems:n,setRootItems:i,fetchError:l,processingTime:o,loading:s,onRenderRow:c,getItemUrl:u,getFileTrailingVisual:m,getFileIcon:p,sortDirectoryItems:h}=e,{knownFolders:f,dispatchKnownFolders:x}=(0,d.useContext)(_),{refreshTree:g}=M();d.useEffect(()=>{if(s)return;let e=new Map,t=[];g?.current||(e=new Map(f),t=n.slice());let{newRootItems:a,rootItemsUpdated:l}=z(r,e,t,h);(a.length>n.length||l||g?.current)&&i(a),(e.size>f.size||g?.current)&&x({type:"set",folders:e,processingTime:o}),g?.current&&(g.current=!1)},[r,s]);let y=d.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(N.A,{onMouseDown:y,sx:{px:3,pb:2,...e.sx},"data-testid":"repos-file-tree-container",children:s?(0,a.jsx)(N.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,a.jsx)(P.A,{"aria-label":"Loading file tree"})}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(L.G,{"aria-label":"Files",children:[l&&(0,a.jsx)(et,{message:"Some files could not be loaded."}),(0,a.jsx)(Q,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:e.onItemSelected,dispatchKnownFolders:x,selectedItemRef:e.selectedItemRef,onRenderRow:c,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:u,getFileTrailingVisual:m,getFileIcon:p})]})})})}function et({message:e}){return(0,a.jsxs)(L.G.Item,{id:"error-tree-row",children:[(0,a.jsx)(L.G.LeadingVisual,{children:(0,a.jsx)(E.A,{icon:s.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,a.jsx)(N.A,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{K.displayName||(K.displayName="WrappedFileTreeRow")}catch{}try{Z.displayName||(Z.displayName="FileTreeRow")}catch{}try{X.displayName||(X.displayName="WrappedDirectoryTreeRow")}catch{}try{Y.displayName||(Y.displayName="DirectoryTreeRow")}catch{}try{J.displayName||(J.displayName="WrappedDirectoryContents")}catch{}try{Q.displayName||(Q.displayName="DirectoryContents")}catch{}try{ee.displayName||(ee.displayName="ReposFileTreeView")}catch{}try{et.displayName||(et.displayName="ErrorTreeRow")}catch{}var er=r(39672);function ea({sx:e,onClick:t,textAreaId:r}){let{searchShortcut:i}=(0,l.wk)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.K,{unsafeDisableTooltip:!0,"aria-label":"Search this repository",icon:s.SearchIcon,"data-hotkey":i.hotkey,sx:{color:"fg.subtle",fontSize:14,fontWeight:"normal",flexShrink:0,...e},size:"medium",onClick:e=>{t?.(),(0,er.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})}}),(0,a.jsx)(n._,{buttonFocusId:r,buttonHotkey:i.hotkey,onButtonClick:()=>{let e=document.getElementById(r);t?.(),(0,er.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{ea.displayName||(ea.displayName="SearchButton")}catch{}let en=R.Gy.xxxlarge;function ei({clientOnlyFilePaths:e,collapseTree:t,showTree:r,fileTree:n,treeToggleElement:i,treeToggleRef:l,onItemSelected:c,processingTime:u,searchBoxRef:m,repo:w,path:O,refInfo:$,isFilePath:D,foldersToFetch:q,id:L,onFindFilesShortcut:P,textAreaId:G,getItemUrlOverride:W,headerSx:M,paneSx:V,paneContentsSx:H,treeContainerSx:B,findFileWorkerPath:U,headerContent:K,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y,showFindFile:J=!0,directoryNavigateOnClick:Q=!0,showRefSelectorRow:et=!0}){if(J&&void 0===U)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:er}=(0,g.A)(),[ei,es]=d.useState(q.length>0),[ec,ed]=d.useState(!1),eu=d.useRef([]),em=d.useRef(null),ep=d.useRef(!1),eh=d.useRef(!1),ef=d.useRef(null),{query:ex}=(0,x.JS)(),{codeCenterOption:eg}=(0,C.ud)(),ey=d.useRef(er),[ew]=(0,o.I)(()=>!1,!0,[]),{getItemUrl:eb}=(0,y.Z)(),ev=W||eb,eR=[],eC=new Map,ej=d.useRef(ei);!ej.current&&n&&(eR=z(n,eC,[],Y).newRootItems),ej.current=!0;let[ek,eN]=d.useReducer(el,eC),[eF,eI]=d.useState(eR);d.useEffect(()=>{r&&(!ex||window.innerWidth>=R.Gy.large)||(ef.current=null)},[r,ex]),d.useEffect(()=>{er&&ey.current!==er&&window.innerWidth<en&&t({setCookie:!1}),ey.current=er},[t,er]);let eE=d.useCallback(async e=>{let t=eb({contentType:"directory",path:e,name:e});try{let r=await (0,j.lS)(`${t}?noancestors=1`);if(r.ok){let t=await r.json(),a={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};n[e]=a}else ed(!0)}catch{ed(!0)}eu.current.push(e),eu.current.length===q.length&&es(!1)},[n,q.length,eb]);d.useEffect(()=>{if(q&&!ep.current)for(let e of q)eE(e);ep.current=!0},[eE,q,ek.size]);let eS=d.useCallback(e=>{r&&(!ex||window.innerWidth>=R.Gy.large)&&em.current&&e&&(0,k.R)(e,em.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[ex,r]),eT=d.useCallback(e=>{e&&eh.current?eh.current=!1:ef.current!==e&&eS(e),ef.current=e},[eS]),eA=d.useCallback(e=>{em.current=e,window.innerWidth>=en&&eS(ef.current)},[eS]),e_=d.useCallback(e=>{e&&eS(ef.current)},[eS]),{screenSize:eO}=(0,R.lm)(),e$=!ew&&(er&&eO<en||eO<R.Gy.xlarge)&&eO>=R.Gy.large,eD=d.useCallback(()=>{e$||c(),eh.current=!0},[c,e$]),eq=r?{}:{display:"none"},eL=D?O.substring(0,O.lastIndexOf("/")):O,eP=(0,d.useMemo)(()=>({knownFolders:ek,dispatchKnownFolders:eN}),[ek]),eG=d.useMemo(()=>ew?null:(0,A.KF)(),[ew]),eW=d.useCallback(()=>{window.innerWidth>R.Gy.large&&window.innerWidth<R.Gy.xxxxlarge&&t({setCookie:!1})},[t]),eM=(0,a.jsxs)(N.A,{id:L,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ew?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"},...H},children:[(0,a.jsxs)(N.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",px:3,pb:2,pt:3,...M},children:[K,et&&(0,a.jsxs)(N.A,{sx:{mx:4,display:"flex",width:"100%"},children:[(0,a.jsx)(N.A,{sx:{flexGrow:1},children:(0,a.jsx)(f.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,a.jsxs)(N.A,{sx:{ml:2,whiteSpace:"nowrap","&:hover button:not(:hover)":{borderLeftColor:"var(--button-default-borderColor-hover, var(--color-btn-hover-border))"}},children:[$.canEdit&&(0,a.jsx)(F.A,{"aria-label":"Add file",direction:"s",children:(0,a.jsx)(I.K,{unsafeDisableTooltip:!0,"aria-label":"Add file",as:v.N,sx:{color:"fg.subtle",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},icon:s.PlusIcon,to:(0,b.IO)({repo:w,path:eL,commitish:$.name,action:"new"}),onClick:eD})}),(0,a.jsx)(ea,{sx:$.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eW,textAreaId:G})]})]})]}),$.currentOid&&J&&U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.default,{commitOid:$.currentOid,findFileWorkerPath:U,onItemSelected:c,searchBoxRef:m,sx:{ml:3,mr:3,mb:"12px","@media screen and (max-width: 768px)":ew?{display:"none"}:void 0}}),(0,a.jsx)(p,{inputRef:m,onFindFilesShortcut:P,textAreaId:G})]}),(0,a.jsx)(eo,{scrollingRef:em}),(0,a.jsxs)(N.A,{ref:eA,sx:{flexGrow:1,maxHeight:"100% !important",overflowY:"auto","@media screen and (max-width: 768px)":ew?{display:"none"}:void 0,scrollbarGutter:"stable"},children:[ew?$.currentOid&&(0,a.jsx)("div",{className:ex?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ee,{clientOnlyFilePaths:e,data:n,rootItems:eF,selectedItemRef:eT,setRootItems:eI,onItemSelected:eD,processingTime:u,loading:ei,fetchError:ec,directoryNavigateOnClick:Q,getItemUrl:ev,sx:B,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y})}):eG&&(0,a.jsx)(A.bL,{node:eG}),!$.currentOid&&!w.isEmpty&&(0,a.jsxs)(N.A,{sx:{mt:2,mx:4,mb:"12px",fontSize:1,alignItems:"center",color:"danger.fg"},children:[(0,a.jsx)(E.A,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]}),eV=e$||er?{"@media print, screen and (max-width: 1349px) and (min-width: 768px)":{display:"none"}}:{"@media print, screen and (max-width: 1011px) and (min-width: 768px)":{display:"none"}};return(0,a.jsxs)(_.Provider,{value:eP,children:[eG&&(0,a.jsx)(A.oj,{node:eG,children:$.currentOid&&(0,a.jsx)("div",{className:ex?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ee,{clientOnlyFilePaths:e,data:n,directoryNavigateOnClick:Q,rootItems:eF,selectedItemRef:eT,setRootItems:eI,onItemSelected:eD,processingTime:u,loading:ei,fetchError:ec,getItemUrl:ev,sx:B,getFileTrailingVisual:Z,getFileIcon:X,sortDirectoryItems:Y})})}),!r&&eg.enabled&&i&&(0,a.jsx)(N.A,{sx:{position:"absolute",p:3,display:"none","@media screen and (min-width: 1360px)":{display:"block"}},children:i}),(0,a.jsx)(S.O7.Pane,{position:"start",sticky:!0,sx:{minWidth:0,...eq,flexDirection:["column","column","inherit"],"@media screen and (min-width: 768px)":{height:"100vh",maxHeight:"100vh !important"},...eV,...V},padding:"none",width:"large",resizable:!0,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"line",narrow:"none"},children:r&&!e$&&(0,a.jsx)("div",{className:ew?er?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:(0,a.jsx)(a.Fragment,{children:eM})})}),r&&e$&&ey.current===er&&(0,a.jsx)(T.Ay,{className:ew?er?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,ref:e_,returnFocusRef:l,onClickOutside:eW,onEscape:eW,top:0,position:"fixed",sx:{...eq,width:"440px",height:"100vh",maxHeight:"100vh",borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,a.jsx)(a.Fragment,{children:eM})})]})}function el(e,t){switch(t.type){case"set":{let r=e?.size>0;return(0,w.BI)("file-tree",{"fetch-count":r?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":r?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let r=new Map([...e,...t.folders]);return(0,w.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":r.size,"nav-type":"fetch","processing-time":t.processingTime}),r}default:throw Error(`Unknown action type: ${t.type}`)}}function eo({scrollingRef:e}){let[t,r]=d.useState(e.current&&e.current.scrollTop>0);return d.useEffect(()=>{if(e.current){let t=e.current,a=()=>{t&&t.scrollTop>0?r(!0):r(!1)};return t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}}},[e]),t?(0,a.jsx)(N.A,{sx:{borderBottom:"1px solid",borderColor:"border.default",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.3)"}}):null}try{ei.displayName||(ei.displayName="ReposFileTreePane")}catch{}try{eo.displayName||(eo.displayName="TreeBorder")}catch{}var es=r(27510),ec=r(73480),ed=r(86584),eu=r(97156),em=r(51012),ep=r(73729);function eh(e,t,r,n,i,l="fileTreeExpanded",o){let{sendRepoClickEvent:s}=(0,m.T)(),c=(0,ed.i)(),p=(0,ec.Ri)(l),h=!(void 0!==eu.XC),f=!c&&p&&"false"!==p.value||c&&r;void 0===f&&(f=!1);let x=(0,d.useRef)(null),g=(0,d.useRef)(null),{screenSize:y}=(0,R.lm)(),[w,b]=(0,d.useState)(f),v=(0,d.useRef)(f),C=(0,d.useRef)(!1),j=(0,d.useRef)(!1),k=(0,d.useCallback)(()=>!(t.current&&window.innerWidth>=en||!t.current&&window.innerWidth>=R.Gy.xlarge),[t]);(0,em.N)(()=>{let e=k();e||(C.current=!1),b((0,es.q)()&&y<R.Gy.large&&!j.current||(!e||C.current)&&(c&&w||!c&&p?.value!=="false"))},[C,p?.value,y,t,k,c]),(0,em.N)(()=>{let e=!t.current&&window.innerWidth<R.Gy.xlarge,r=!t.current&&window.innerWidth>=R.Gy.xlarge;e&&v.current&&!(0,es.q)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t,y]),(0,em.N)(()=>{let e=t.current&&window.innerWidth<en,r=t.current&&window.innerWidth>=en;e&&v.current&&!(0,es.q)()&&w&&b(!1),r&&v.current&&!w&&b(!0)},[t]);let N=(0,d.useCallback)(e=>{if(b(!0),k()&&(C.current=!0),e?.setCookie){i?.(!0),v.current=!0;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,ec.TV)(l,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>x.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>g.current?.focus())},[l,2592e6,k,i]),F=(0,d.useCallback)(e=>{if(b(!1),C.current=!1,j.current=!0,e?.setCookie){i?.(!1),v.current=!1;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,ec.TV)(l,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>x.current?.focus())},[l,2592e6,i]),I=(0,d.useCallback)(e=>e&&window.innerWidth>=en||!t.current&&window.innerWidth>=R.Gy.xlarge,[t]),E=(0,d.useMemo)(()=>(0,a.jsx)(ep.A,{as:"h2",sx:{display:"flex",fontSize:1},children:(0,a.jsx)(u,{expanded:w,ariaControls:e,onToggleExpanded:()=>{s(w?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),w?F({focus:"toggleButton",setCookie:I(t.current)}):N({focus:"toggleButton",setCookie:I(t.current)})},className:void 0!==p||w||h?void 0:"react-tree-toggle-button-with-indicator",ref:x,textAreaId:n,...o})}),[w,e,p,h,n,o,s,F,I,t,N]);return{isTreeExpanded:w,expandTree:N,collapseTree:F,treeToggleElement:E,treeToggleRef:x,searchBoxRef:g}}},28910:(e,t,r)=>{r.d(t,{_:()=>n});var a=r(74848);function n({buttonFocusId:e,buttonHotkey:t,onButtonClick:r,buttonTestLabel:n,onlyAddHotkeyScopeButton:i}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{hidden:!0,"data-testid":n||"","data-hotkey":t,onClick:r,"data-hotkey-scope":e}),!i&&(0,a.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:r})]})}try{n.displayName||(n.displayName="DuplicateOnKeydownButton")}catch{}},95619:(e,t,r)=>{r.d(t,{L:()=>o});var a=r(74848),n=r(59857),i=r(94977),l=r(87330);let o=r(96540).forwardRef(({expanded:e,testid:t,ariaLabel:r,ariaControls:o,onToggleExpanded:s,sx:c,alignment:d,dataHotkey:u,className:m,tooltipDirection:p,variant:h},f)=>(0,a.jsx)(i.A,{"aria-label":r,id:`expand-button-${t}`,direction:p,children:(0,a.jsx)(l.K,{unsafeDisableTooltip:!0,ref:f,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":o,icon:e?"left"===d?n.SidebarExpandIcon:n.SidebarCollapseIcon:"left"===d?n.SidebarCollapseIcon:n.SidebarExpandIcon,sx:{color:"fg.muted",...c},"data-hotkey":u,onClick:e=>{s(e)},variant:h??"invisible",className:m})}));o.displayName="ExpandButton"},28610:(e,t,r)=>{r.r(t),r.d(t,{FileResultRow:()=>P,default:()=>q});var a=r(74848),n=r(43772),i=r(57294),l=r(61836),o=r(18704),s=r(89504),c=r(6032),d=r(83056),u=r(56226),m=r(42024),p=r(27788),h=r(94120),f=r(56265),x=r(59857),g=r(82678),y=r(75177),w=r(65481),b=r(17909),v=r(86519),R=r(85349),C=r(38553),j=r(30729),k=r(91385),N=r(96540),F=r(37363),I=r(5225);let E=(0,I.A)(k.fN);function S({data:e}){let{query:t,baseList:r,startTime:a}=e,n=t.replaceAll("\\","");return{query:t,list:r.filter(e=>""===n||(0,k.qA)(n,e)&&E(n,e)>0).sort((e,t)=>E(n,t)-E(n,e)),baseCount:r.length,startTime:a}}var T=r(27510),A=r(28784);async function _(e){let t=await (0,A.lS)(e);return t.ok?await t.json():void 0}let O=new Map,$=(0,I.A)(_,{cache:O}),D={excludeDirectories:!1,excludeSeeAllResults:!1};function q({actionListSx:e={},additionalResults:t,commitOid:r,config:u=D,findFileWorkerPath:x,getItemUrl:C,onRenderRow:j,onItemSelected:k,searchBoxRef:I,sx:E={}}){let{excludeDirectories:A,excludeSeeAllResults:_}=u,{query:O,setQuery:q}=(0,n.JS)(),P=(0,s.t)(),G=N.useRef(null),W=I??G,[V,H]=N.useState(O.length>0),[B,z]=N.useState(!!O),{list:U,directories:K,loading:Z,error:X}=function(e,t,r){let a=(0,s.t)(),[n,i]=(0,N.useState)({list:[],directories:[],loading:!0}),l=(0,d.Cl)({repo:a,commitOid:e,includeDirectories:!r});return(0,N.useEffect)(()=>{let e=!1,r=async()=>{i({list:[],directories:[],loading:!0});let t=await $(l);if(e)return;let r=t?.paths||[],a=t?.directories||[];i({list:r.concat(a).sort(),directories:a,error:!t})};return t&&r(),function(){e=!0}},[l,t,r]),n}(r,V,!!A),{path:Y}=(0,i.eu)(),{getUrl:J}=(0,o.Z)(),{queryText:Q,queryLine:ee}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(O),{matches:et,clearMatches:er}=function(e,t,r,a){let[n,i]=N.useState(),o=N.useRef(""),s=N.useRef(),{sendStats:c}=(0,l.T)(),d=N.useRef(!1),u=N.useCallback(()=>{let e=new F.z(r,S);e.onmessage=({data:e})=>{d.current=!1,i(e.list),o.current=e.query,e.startTime&&c("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[c,r]);return N.useEffect(()=>{if(a)return u(),function(){s.current?.terminate()}},[u,a]),N.useEffect(()=>{if(e.length&&t){d.current&&(s.current?.terminate(),u());let r=o.current&&t.startsWith(o.current);d.current=!0,s.current?.postMessage({baseList:r&&n||e,query:t,startTime:performance.now()})}},[e,t,u]),{matches:n,clearMatches:()=>i(void 0)}}((0,N.useMemo)(()=>[...U,...t??[]].sort(),[t,U]),Q,x,V),{sendRepoClickEvent:ea}=(0,l.T)(),en=(0,p.Z)(),[ei,el]=N.useState(0),[eo,es]=N.useState((0,T.q)()),ec=N.useRef(null),ed=N.useRef(null),eu="file-results-list",{sendRepoKeyDownEvent:em}=(0,l.T)(),{screenSize:ep}=(0,m.lm)(),eh=u.useOverlay??ep>=m.Gy.large,ef=N.useCallback(()=>{ea("FILE_TREE.SEARCH_RESULT_CLICK"),k?.(),z(!1)},[ea,k]),ex=(e,t,r)=>C?C(e,t,r):J({path:e,action:t?"tree":"blob",hash:r}),{containerRef:eg}=(0,g.G)({bindKeys:h.z0.ArrowVertical|h.z0.HomeAndEnd,focusInStrategy:"previous"},[Z,X]);N.useEffect(()=>{O||z(!1)},[O]),N.useEffect(()=>{document.activeElement!==W.current&&eh&&z(!1)},[Y,W,eh]);let ey=et?.slice(0,40)||[],ew=et&&et.length>ey.length,eb=(0,a.jsx)(y.A,{sx:{maxHeight:eh?"60vh":"100% !important",overflowY:"auto",scrollbarGutter:"stable",maxWidth:"100vw","@media (max-width: 768px)":{ml:3,mr:2}},children:X?(0,a.jsx)(w.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,a.jsxs)(b.l,{ref:eg,sx:{overflow:"auto",p:eh?2:3,width:"100%",pr:eh?3:0,pt:eh?3:"2px !important",...e},role:"listbox",children:[!Z&&ey.map((e,t)=>{let r=K.includes(e),n=ex(e,r,ee?`L${ee}`:"");return(0,a.jsx)(M,{active:e===Y,index:t,focused:eo&&ei===t,match:e,onRender:j,query:Q,onClick:ef,isDirectory:r,to:n,useOverlay:eh,listRef:eg},e)}),(0,a.jsxs)("div",{className:"m-3 text-center",children:[(0,a.jsx)(L,{loading:Z||!et,visibleResultCount:ey.length,truncated:!!ew}),ew&&!_&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(v.A,{id:"see-all-results-link",className:"focus-visible",ref:ec,href:(0,d.Y8)({owner:P.ownerLogin,repo:P.name,searchTerm:`path:${Q}`}),sx:eo&&ei===ey.length?{outline:"2px solid var(--focus-outlineColor, var(--color-accent-fg))",outlineOffset:"-2px",boxShadow:"none"}:{},children:"See all results"})]})]})]})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{ref:ed,sx:{mx:2,...E},children:(0,a.jsx)(T.Z,{ariaActiveDescendant:(!eh&&O||eh&&B)&&eo&&ei>-1?ew&&ei===ey.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:eh?B:void 0,ariaHasPopup:eh,ariaControls:eh?eu:void 0,ref:W,query:O,onKeyDown:e=>{let{key:t,shiftKey:r,metaKey:a,altKey:n,ctrlKey:i}=e;if(!r&&!a&&!n){if("Escape"===t)O?(em("FILE_TREE.CANCEL_SEARCH"),q(""),er()):document.activeElement&&document.activeElement.blur();else if(!O)return;else if("Enter"===t)!_&&ew&&ei===ey.length?(en((0,d.Y8)({owner:P.ownerLogin,repo:P.name,searchTerm:`path:${Q}`})),k?.()):ey[ei]&&(en(ex(ey[ei],!1,ee?`L${ee}`:"")),z(!1),k?.());else if("ArrowDown"===t||i&&"n"===t){if(!_&&ew&&ei>=ey.length-1){if(el(ey.length),ec.current&&eg.current){let e=(0,c.U)(eg.current);(0,f.R)(ec.current,e,{behavior:"instant"})}}else el(Math.min(ei+1,ey.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){el(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>H(!0),onSearch:e=>{q(e),e?z(!0):(er(),z(!1)),el(0)},onBlur:e=>{eg.current?.contains(e.relatedTarget)||(z(!1),es(!1))},onFocus:()=>{O&&z(!0),es(!0)},sx:{minWidth:"160px"}})}),eh&&(0,a.jsx)(R.T,{anchorRef:ed,open:eh&&B,renderAnchor:null,onClose:()=>{z(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:eu,role:"dialog"},children:eb}),!eh&&O&&eb]})}function L({visibleResultCount:e,truncated:t,loading:r}){return(0,a.jsx)("span",{role:"status",className:r||t||0===e?void 0:"sr-only","aria-label":r?"Loading":void 0,children:r?(0,a.jsx)(C.A,{size:"large"}):0===e?"No matches found":t?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}let P=({active:e,focused:t,index:r,match:n,query:i,to:l,isDirectory:o,onClick:s,onRender:d,useOverlay:m,listRef:p})=>{let h=(0,k.Xq)(i,n);d?.();let x=N.useRef(null),g=o?G:W;N.useEffect(()=>{if(t&&x.current&&p?.current){let e=(0,c.U)(p.current);(0,f.R)(x.current,e,{behavior:"instant"})}},[t,p]);let w={};return t&&(w={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"}),(0,a.jsx)(b.l.Item,{id:`file-result-${r}`,ref:x,as:u.N,onSelect:s,to:l,active:e,sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...w},role:"option","data-focus-visible-added":t||void 0,tabIndex:m?-1:0,children:(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,a.jsx)(V,{text:n,positionsList:h,sx:{color:"fg.muted"},LeadingIcon:g})}),t&&(0,a.jsx)(y.A,{sx:{pl:1,whiteSpace:"nowrap",color:"fg.muted"},children:`Go to ${o?"folder":"file"}`})]})},n)},G=()=>(0,a.jsx)(j.A,{"aria-label":"Directory",icon:x.FileDirectoryFillIcon,sx:{color:"var(--treeViewItem-leadingVisual-iconColor-rest, var(--color-icon-directory))",mr:2},size:"small"}),W=()=>(0,a.jsx)(j.A,{"aria-label":"File",icon:x.FileIcon,className:"fgColor-muted mr-2",size:"small"}),M=N.memo(P);function V({text:e,positionsList:t,sx:r,LeadingIcon:n}){let i=[],l=0;for(let r of t){if(Number(r)!==r||r<l||r>e.length)continue;let t=e.slice(l,r);t&&i.push(H(t)),l=r+1,i.push((0,a.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[r]},r))}return i.push(H(e.slice(l))),(0,a.jsx)(y.A,{sx:r,children:(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(n,{}),i]})})}function H(e){return e.replaceAll("/","/\u200B")}try{q.displayName||(q.displayName="FileResultsList")}catch{}try{L.displayName||(L.displayName="FileResultsStatus")}catch{}try{P.displayName||(P.displayName="FileResultRow")}catch{}try{G.displayName||(G.displayName="DirectoryIcon")}catch{}try{W.displayName||(W.displayName="FileResultIcon")}catch{}try{M.displayName||(M.displayName="MemoizedFileResultRow")}catch{}try{V.displayName||(V.displayName="HighlightMatch")}catch{}},27510:(e,t,r)=>{r.d(t,{Z:()=>m,q:()=>p});var a=r(74848),n=r(70170),i=r(96810),l=r(61836),o=r(97156),s=r(59857),c=r(44981),d=r(75177),u=r(96540);let m=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:r,ariaHasPopup:o,onBlur:m,onFocus:h,onKeyDown:f,onPreload:x,onSearch:g,query:y,sx:w={}},b)=>{let{sendRepoClickEvent:v}=(0,l.T)(),[R,C]=u.useState(y),j=u.useRef((0,n.s)(e=>g(e),250));u.useEffect(()=>{C(y)},[y]);let k=y?(0,a.jsx)(c.A.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),g("")},icon:s.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.A,{autoFocus:p(),ref:b,value:R,onKeyDown:f,onChange:e=>{C(e.target.value),x(),j.current(e.target.value)},sx:{display:"flex",...w},"aria-label":"Go to file","aria-activedescendant":e,role:o?"combobox":void 0,"aria-controls":t,"aria-expanded":r,"aria-haspopup":o?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:"Go to file",leadingVisual:s.SearchIcon,trailingAction:k,trailingVisual:k?void 0:()=>(0,a.jsx)(i.E,{children:(0,a.jsx)(d.A,{sx:{mr:"-6px"},children:(0,a.jsx)("kbd",{children:"t"})})}),onFocus:e=>{x(),e.target.select(),h?.(e)},onBlur:m,onClick:()=>v("FILE_TREE.SEARCH_BOX")})})});function p(){return"1"===new URLSearchParams(o.fV.search).get("search")}m.displayName="FilesSearchBox"},20864:(e,t,r)=>{r.d(t,{A:()=>m,c:()=>u});var a=r(74848),n=r(42661),i=r(86584),l=r(74572),o=r(42024),s=r(96540);let c=(0,l.A)("localStorage"),d=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:r}){let l="blame"in t,u=(0,n.Hf)(t),m=(0,i.i)(),p=(0,s.useRef)(),[h,f]=(0,s.useState)(()=>{let e=c.getItem("codeNavOpen");if(!m&&""!==e&&null!==e||m&&t.symbolsExpanded)return"codeNav"}),x=(l||u)&&"codeNav"===h?void 0:h;s.useEffect(()=>{r.current=x},[x,r]);let g=(0,s.useCallback)((e,t)=>{f(r=>(r&&p.current&&p.current.focus(),p.current=t,l||u&&"codeNav"===e?void 0:e))},[l,u]);!function(e){let{screenSize:t}=(0,o.lm)(),r=(0,s.useRef)(t);(0,s.useEffect)(()=>{let a=r.current>=o.Gy.large,n=r.current===t;t<o.Gy.large&&(a||n)&&e(void 0),r.current=t},[t,e])}(g);let y=(0,s.useMemo)(()=>({openPanel:x,setOpenPanel:g}),[x,g]);return(0,a.jsx)(d.Provider,{value:y,children:e})}function m(){return(0,s.useContext)(d)}try{d.displayName||(d.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},51489:(e,t,r)=>{r.d(t,{c9:()=>b,_$:()=>y,iU:()=>w,tV:()=>g});var a=r(74848),n=r(55847),i=r(86519),l=r(30729),o=r(59857),s=r(92240),c=r(71312),d=r(96540),u=r(54156),m=r(28784);let p=async(e,t,r)=>{try{return(await (0,m.DI)(e,{method:t,body:r})).ok}catch(e){return!1}},h=(e,t)=>p(e,"DELETE",x(t)),f=(e,t)=>p(e,"POST",x(t)),x=e=>{let t=new FormData;return t.append("feature",e),t};function g(e){let{alreadyRequested:t=!1,dismissed:r=!1,dismissedAt:a="",featureName:n="",requestPath:i=""}=e??{},[l,o]=(0,d.useState)(!1),[s,c]=(0,d.useState)(t),{addToast:m}=(0,u.Y6)(),p=async()=>{o(!0),await (s?h:f)(i,n)?c(!s):m({type:"error",message:"Something went wrong. Please try again later."}),o(!1)};return{inProgress:l,requested:s,dismissed:r,dismissedAt:a,toggleFeatureRequest:p}}function y({featureRequestInfo:e,learnMorePath:t,requestMessage:r,requestedMessage:n}){let{inProgress:i,requested:l,toggleFeatureRequest:o}=g(e);return e.showFeatureRequest?l?(0,a.jsx)(b,{inProgress:i,toggleFeatureRequest:o,requestedMessage:n}):(0,a.jsx)(w,{inProgress:i,toggleFeatureRequest:o,isEnterpriseRequest:e.isEnterpriseRequest,featureName:e.featureName,billingEntityId:e.billingEntityId,learnMorePath:t,requestMessage:r}):null}let w=({inProgress:e,toggleFeatureRequest:t,billingEntityId:r="",isEnterpriseRequest:n=!1,featureName:i,learnMorePath:l,requestMessage:o})=>{let{sendClickAnalyticsEvent:s}=(0,c.S)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{onClick:()=>{t();let e=n&&r?`ref_cta:ask_enterprise_owners_for_access;ref_loc:${i};enterprise_id:${r};`:`ref_cta:ask_admin_for_access;ref_loc:${i};`;s({category:"member_feature_request",action:`action.${i}`,label:e})},inProgress:e,isEnterpriseRequest:n}),o&&(0,a.jsx)(C,{message:o}),l&&(0,a.jsx)(R,{onClick:()=>{s({category:"suggestion",action:"click_to_read_docs",label:`ref_cta:learn_more;ref_loc:${i};`})},path:l})]})},b=({inProgress:e,toggleFeatureRequest:t,requestedMessage:r})=>(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(j,{message:r}),(0,a.jsx)(k,{onClick:t,inProgress:e})]}),v=({onClick:e,inProgress:t,isEnterpriseRequest:r})=>(0,a.jsx)(n.Q,{onClick:e,variant:"primary",disabled:t,...(0,s.G)("feature-request-request-button"),children:t?"Requesting...":r?"Ask enterprise owners for access":"Ask admin for access"}),R=({onClick:e,path:t})=>(0,a.jsx)(i.A,{href:t,onClick:e,...(0,s.G)("feature-request-learn-more-link"),children:"Learn more"}),C=({message:e})=>(0,a.jsx)("span",{children:e}),j=({message:e})=>(0,a.jsxs)("span",{className:"d-inline-block color-fg-subtle mr-1",children:[(0,a.jsx)(l.A,{icon:o.CheckIcon}),e]}),k=({onClick:e,inProgress:t})=>(0,a.jsx)(i.A,{className:"color-fg-danger text-semibold",as:"button",onClick:e,disabled:t,...(0,s.G)("feature-request-cancel-link"),children:t?"Cancelling...":"Remove request"});try{y.displayName||(y.displayName="FeatureRequest")}catch{}try{w.displayName||(w.displayName="RequestFeature")}catch{}try{b.displayName||(b.displayName="CancelFeatureRequest")}catch{}try{v.displayName||(v.displayName="RequestCTA")}catch{}try{R.displayName||(R.displayName="LearnMore")}catch{}try{C.displayName||(C.displayName="RequestMessage")}catch{}try{j.displayName||(j.displayName="RequestedMessage")}catch{}try{k.displayName||(k.displayName="RemoveRequestCTA")}catch{}},86233:(e,t,r)=>{r.d(t,{a:()=>a});function a({path:e,Component:t,shouldNavigateOnError:r,transitionType:a,children:n}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let r=`${e.pathname}${e.search}`;t=await window.fetch(r,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom","X-React-Router":"json"}})}catch(e){return{type:r?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:r?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:r?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:a,children:n}}},18212:(e,t,r)=>{r.d(t,{T2:()=>s,cp:()=>p,ud:()=>f});var a=r(74848),n=r(74572),i=r(96540);let l=(0,n.A)("localStorage"),o="codeView.codeFolding",s="codeView.codeWrapping",c="codeView.centerView",d="codeView.openSymbolsOnClick",u=new Map([[o,"Show code folding buttons"],[s,"Wrap lines"],[c,"Center content"],[d,"Open symbols on click"]]),m=(0,i.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),p=({children:e})=>{let t=h(o,!0),r=h(s,!1),n=h(c,!1),l=h(d,!0),u=(0,i.useMemo)(()=>({codeFoldingOption:t,codeWrappingOption:r,codeCenterOption:n,openSymbolsOption:l}),[t,r,n,l]);return(0,a.jsx)(m.Provider,{value:u,children:e})};function h(e,t){let r=l.getItem(e),[a,n]=(0,i.useState)(()=>r?"true"===r:t),o=u.get(e)||"";return{name:e,enabled:a,setEnabled:n,label:o}}function f(){return(0,i.useContext)(m)}try{m.displayName||(m.displayName="CodeViewOptionsContext")}catch{}try{p.displayName||(p.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_feature-request_FeatureR-ec5225-5c4d8798d823.js.map